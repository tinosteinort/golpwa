!function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,e,n){"use strict";n.r(e);var r,i,o=(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),l=function(t,e){this.x=t,this.y=e};!function(t){t.DEAD="DEAD",t.ALIVE="ALIVE"}(i||(i={}));var u,s=function(){function t(){}return t.prototype.matches=function(t,e){return e>3},t.prototype.getStatus=function(){return i.DEAD},t}(),c=function(){function t(){}return t.prototype.matches=function(t,e){return t==i.DEAD&&3==e},t.prototype.getStatus=function(){return i.ALIVE},t}(),a=function(){function t(){}return t.prototype.matches=function(t,e){return t==i.ALIVE&&(2==e||3==e)},t.prototype.getStatus=function(){return i.ALIVE},t}(),f=function(){function t(){}return t.prototype.matches=function(t,e){return t==i.DEAD||e<2},t.prototype.getStatus=function(){return i.DEAD},t}(),h=function(){function t(){this.rules=[new c,new a,new f,new s]}return t.prototype.calculateStatus=function(t,e){for(var n=0,r=this.rules;n<r.length;n++){var i=r[n];if(i.matches(t,e))return i.getStatus()}throw Error("Could not find a matching rulue")},t}(),p=function(){function t(t,e){this.width=t,this.height=e,this.statusCalculator=new h,this.livingCells=[],this.newLivingCells=[],this._generationCount=1}return t.prototype.executeCycle=function(){this.calculateNextStatusOfCells(i.ALIVE,this.livingCells);var t=this.determineDeadNeighbourCells();this.calculateNextStatusOfCells(i.DEAD,t),this.updateLivingCells(),this._generationCount++},t.prototype.calculateNextStatusOfCells=function(t,e){var n=this;e.forEach((function(e){var r=n.determineLivingNeighbourCells(e);n.statusCalculator.calculateStatus(t,r.length)==i.ALIVE&&n.newLivingCells.push(e)}))},t.prototype.determineLivingNeighbourCells=function(t){for(var e=[],n=0,r=this.getNeighbours(t);n<r.length;n++){var i=r[n];this.cellIsAlive(i)&&e.push(i)}return e},t.prototype.determineDeadNeighbourCells=function(){for(var t=[],e=0,n=this.livingCells;e<n.length;e++)for(var r=n[e],i=0,o=this.getNeighbours(r);i<o.length;i++){var l=o[i];this.cellIsAlive(l)||this.cellIsInArray(t,l)||t.push(l)}return t},t.prototype.cellIsInArray=function(t,e){for(var n=0,r=t;n<r.length;n++){var i=r[n];if(i.x==e.x&&i.y==e.y)return!0}return!1},t.prototype.updateLivingCells=function(){this.livingCells.splice(0,this.livingCells.length),this.livingCells=this.livingCells.concat(this.newLivingCells),this.newLivingCells.splice(0,this.newLivingCells.length)},t.prototype.cellIsAlive=function(t){for(var e=0,n=this.livingCells;e<n.length;e++){var r=n[e];if(r.x==t.x&&r.y==t.y)return!0}return!1},t.prototype.coordinateIsAliveCell=function(t,e){return this.cellIsAlive(new l(t,e))},t.prototype.addCell=function(t,e){return this.livingCells.push(new l(t,e)),this},t.prototype.indexOfCell=function(t){for(var e=0;e<this.livingCells.length;e++){var n=this.livingCells[e];if(n.x==t.x&&n.y==t.y)return e}return-1},t.prototype.removeCell=function(t,e){var n=this.indexOfCell(new l(t,e));return n>-1&&this.livingCells.splice(n,1),this},t.prototype.clear=function(){return this.livingCells.splice(0,this.livingCells.length),this._generationCount=0,this},t.prototype.getLivingCells=function(){return this.livingCells},Object.defineProperty(t.prototype,"generationCount",{get:function(){return this._generationCount},enumerable:!0,configurable:!0}),t}(),v=function(t){function e(e,n){var r=t.call(this,e,n)||this;return r.width=e,r.height=n,r}return o(e,t),e.prototype.getNeighbours=function(t){for(var e=[],n=t.x-1;n<=t.x+1;n++)for(var r=t.y-1;r<=t.y+1;r++)!this.pointIsInBound(n,r)||n==t.x&&r==t.y||e.push(new l(n,r));return e},e.prototype.pointIsInBound=function(t,e){return t>=0&&t<this.width&&e>=0&&e<this.height},e}(p),g=function(t){function e(e,n){var r=t.call(this,e,n)||this;return r.width=e,r.height=n,r}return o(e,t),e.prototype.getNeighbours=function(t){for(var e=[],n=t.x-1;n<=t.x+1;n++)for(var r=t.y-1;r<=t.y+1;r++)n==t.x&&r==t.y||e.push(new l(this.translateX(n),this.translateY(r)));return e},e.prototype.translateX=function(t){return t<0?this.width-1:t>=this.width?0:t},e.prototype.translateY=function(t){return t<0?this.height-1:t>=this.height?0:t},e}(p);function d(t){return document.getElementById(t)}function y(t){return document.getElementsByClassName(t)[0]}function C(t,e){t.innerHTML=e}function m(t,e){return d("cell-"+t+"-"+e)}function b(t,e){m(t,e).classList.remove("alive")}function w(t){!function(t,e){for(var n=0;n<e;n++)for(var r=0;r<t;r++)b(r,n)}(t.width,t.height);for(var e=0,n=t.getLivingCells();e<n.length;e++){var r=n[e];i=r.x,o=r.y,m(i,o).classList.add("alive")}var i,o;C(d("generationCounter"),""+t.generationCount)}function I(){var t=d("emInPixel");return t.style.height="1em",t.offsetHeight}"serviceWorker"in navigator&&navigator.serviceWorker.register("service-worker.js").then((function(t){return console.log("Service Worker registration complete, scope: '"+t.scope+"'")})).catch((function(t){return console.log("Service Worker registration failed with error: '"+t+"'")})),function(t){t.TORUS="TORUS",t.FIXED="FIXED"}(u||(u={}));var x,L=(x=I(),Math.floor(y("main").clientWidth/x)-4),E=function(){var t=I();return Math.floor(y("main").clientHeight/t)-4}(),A=u.TORUS;function O(t){return t==u.TORUS?new g(L,E):new v(L,E)}var S,D,_,N,j=O(A);function k(){j.addCell(1,0).addCell(2,1).addCell(0,2).addCell(1,2).addCell(2,2),w(j)}S=L,D=E,_=function(t,e){j.coordinateIsAliveCell(t,e)?j.removeCell(t,e):j.addCell(t,e),w(j)},C(N=d("boardTable"),function(t,e){var n="";n+="<tbody>";for(var r=0;r<e;r++){n+="<tr>";for(var i=0;i<t;i++)n+='<td id="cell-'+i+"-"+r+'"></td>';n+="</tr>"}return n+="</tbody>"}(S,D)),N.addEventListener("click",(function(t){var e=t.target.id;if(0==e.lastIndexOf("cell-",0)){var n=e.match(/(?<=\-)\d+(?=(\-))/)[0],r=e.match(/(?<=\-)\d+$/)[0];_(parseInt(n),parseInt(r))}})),k();var P=-1;function T(){return-1!=P}function B(){j.executeCycle(),w(j)}function M(){T()&&(clearInterval(P),P=-1)}function V(){M(),j.clear(),w(j)}d("nextStepBtn").addEventListener("click",B),d("playBtn").addEventListener("click",(function(){T()||(P=setInterval((function(){B()}),200))})),d("pauseBtn").addEventListener("click",M),d("clearBtn").addEventListener("click",V),d("boardType").addEventListener("change",(function(){var t=this.value;A!=t&&(M(),V(),j=O(A=t)),k()}))}]);